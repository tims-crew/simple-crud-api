(()=>{var e={91:(e,n,t)=>{const r=t(479),{getPostData:o}=t(288);e.exports={getPersons:async function(e,n){try{const e=await r.findAll();e?(n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify("message: not found")))}catch(e){console.error(e)}},getPerson:async function(e,n,t){try{const e=await r.findById(t);e?(n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"person not found"})))}catch(e){console.error(e)}},createPerson:async function(e,n){try{const t=await o(n);if(t){const{name:n,age:o,hobbies:s}=JSON.parse(t),i={name:n,age:o,hobbies:new Array(s)},a=await r.create(i);return e.writeHead(201,{"Content-Type":"application/json"}),e.end(JSON.stringify(a))}console.log(t),e.writeHead(400,{"Content-Type":"plain/text"}),e.end("Please, write something before POSTing!!!")}catch(e){console.error(e)}},updatePerson:async function(e,n,t){try{const s=await o(n),i=await r.findById(t);if(s){const{name:n,age:o,hobbies:a}=JSON.parse(s),c={name:n||i.name,age:o||i.age,hobbies:a||i.hobbies},l=await r.update(c,t);return e.writeHead(201,{"Content-Type":"application/json"}),e.end(JSON.stringify(l))}console.log(s),e.writeHead(400,{"Content-Type":"plain/text"}),e.end("Please, write something before update!!!")}catch(e){console.error(e)}},deletePerson:async function(e,n,t){try{await r.findById(t)?(await r.remove(t),n.writeHead(204,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:`Person with id: ${t} removed`}))):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person Not Found"})))}catch(e){console.log(e)}}}},479:(e,n,t)=>{let r=t(804);const{v4:o}=t(21),{writeDataToFile:s}=t(288);e.exports={findAll:function(){return new Promise(((e,n)=>{e(r)}))},findById:function(e){return new Promise(((n,t)=>{n(r.find((n=>n.id==e)))}))},create:function(e){return new Promise(((n,t)=>{const i={id:o(),...e};r.push(i),s("./person.json",r),n(i)}))},update:function(e,n){return new Promise(((t,o)=>{const i=r.findIndex((e=>e.id===n));r[i]={id:n,...e},s("./person.json",r),t(r[i])}))},remove:function(e){return new Promise(((n,t)=>{r=r.filter((n=>n.id!==e)),s("./person.json",r),n()}))}}},738:(e,n,t)=>{const r=t(147),o=t(17),s=t(37);function i(e){console.log(`[dotenv][DEBUG] ${e}`)}const a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,c=/\\n/g,l=/\r\n|\n|\r/;function u(e,n){const t=Boolean(n&&n.debug),r={};return e.toString().split(l).forEach((function(e,n){const o=e.match(a);if(null!=o){const e=o[1];let n=o[2]||"";const t=n.length-1,s='"'===n[0]&&'"'===n[t];"'"===n[0]&&"'"===n[t]||s?(n=n.substring(1,t),s&&(n=n.replace(c,"\n"))):n=n.trim(),r[e]=n}else t&&i(`did not match key and value when parsing line ${n+1}: ${e}`)})),r}e.exports.config=function(e){let n=o.resolve(process.cwd(),".env"),t="utf8",a=!1;var c;e&&(null!=e.path&&(n="~"===(c=e.path)[0]?o.join(s.homedir(),c.slice(1)):c),null!=e.encoding&&(t=e.encoding),null!=e.debug&&(a=!0));try{const e=u(r.readFileSync(n,{encoding:t}),{debug:a});return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?a&&i(`"${n}" is already defined in \`process.env\` and will not be overwritten`):process.env[n]=e[n]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=u},21:(e,n,t)=>{"use strict";t.r(n),t.d(n,{NIL:()=>S,parse:()=>m,stringify:()=>d,v1:()=>h,v3:()=>b,v4:()=>v,v5:()=>P,validate:()=>l,version:()=>T});const r=require("crypto");var o=t.n(r);const s=new Uint8Array(256);let i=s.length;function a(){return i>s.length-16&&(o().randomFillSync(s),i=0),s.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,n=0){const t=(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase();if(!l(t))throw TypeError("Stringified UUID is invalid");return t};let p,f,g=0,y=0;const h=function(e,n,t){let r=n&&t||0;const o=n||new Array(16);let s=(e=e||{}).node||p,i=void 0!==e.clockseq?e.clockseq:f;if(null==s||null==i){const n=e.random||(e.rng||a)();null==s&&(s=p=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==i&&(i=f=16383&(n[6]<<8|n[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:y+1;const u=c-g+(l-y)/1e4;if(u<0&&void 0===e.clockseq&&(i=i+1&16383),(u<0||c>g)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,y=l,f=i,c+=122192928e5;const h=(1e4*(268435455&c)+l)%4294967296;o[r++]=h>>>24&255,o[r++]=h>>>16&255,o[r++]=h>>>8&255,o[r++]=255&h;const m=c/4294967296*1e4&268435455;o[r++]=m>>>8&255,o[r++]=255&m,o[r++]=m>>>24&15|16,o[r++]=m>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(let e=0;e<6;++e)o[r+e]=s[e];return n||d(o)},m=function(e){if(!l(e))throw TypeError("Invalid UUID");let n;const t=new Uint8Array(16);return t[0]=(n=parseInt(e.slice(0,8),16))>>>24,t[1]=n>>>16&255,t[2]=n>>>8&255,t[3]=255&n,t[4]=(n=parseInt(e.slice(9,13),16))>>>8,t[5]=255&n,t[6]=(n=parseInt(e.slice(14,18),16))>>>8,t[7]=255&n,t[8]=(n=parseInt(e.slice(19,23),16))>>>8,t[9]=255&n,t[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=n/4294967296&255,t[12]=n>>>24&255,t[13]=n>>>16&255,t[14]=n>>>8&255,t[15]=255&n,t};function w(e,n,t){function r(e,r,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const n=[];for(let t=0;t<e.length;++t)n.push(e.charCodeAt(t));return n}(e)),"string"==typeof r&&(r=m(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(r),i.set(e,r.length),i=t(i),i[6]=15&i[6]|n,i[8]=63&i[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=i[e];return o}return d(i)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const b=w("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),v=function(e,n,t){const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=r[e];return n}return d(r)},P=w("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",T=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},288:(e,n,t)=>{const r=t(147);e.exports={writeDataToFile:function(e,n){r.writeFileSync(e,JSON.stringify(n),"utf8",(e=>{console.error(e)}))},getPostData:function(e){return new Promise(((n,t)=>{try{let t="";e.on("data",(e=>{t+=e.toString()})),e.on("end",(()=>{n(t)}))}catch(e){t(e)}}))}}},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},804:e=>{"use strict";e.exports=JSON.parse('[{"id":"43a31323-ba7e-4c05-986a-af74cb7962e8","name":"Jamal","age":30,"hobbies":"playing on guitar, programming"},{"id":"002a6a12-570c-4ddd-90b4-8e31360356e7","name":"Joanna Moan","age":3,"hobbies":[null]},{"id":"8cd8a0a0-7378-461a-9068-1f1537ca64c5","name":"Joanna Moan","age":3,"hobbies":[null]}]')}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return e[r](s,s.exports,t),s.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=t(685),{getPersons:n,getPerson:r,createPerson:o,updatePerson:s,deletePerson:i}=t(91);t(738).config({path:`${__dirname}/.env.production`});const a=process.env.HOST,c=process.env.PORT||5001;e.createServer(((e,t)=>{if("/api/person"===e.url||"/api/person/"===e.url&&"GET"===e.method)n(e,t);else if(e.url.match(/\/api\/person\/\w+/)&&"GET"===e.method){const n=e.url.split("/")[3];r(e,t,n)}else if(e.url.match(/\/api\/person\/?/)&&"POST"===e.method)o(t,e);else if(!e.url.match(/\/api\/person\/\w+/)||"PUT"!==e.method&&"PATCH"!==e.method)if(e.url.match(/\/api\/person\/\w+/)&&"DELETE"===e.method){const n=e.url.split("/")[3];i(t,e,n)}else t.writeHead(404,{"Content-Type":"text/plain"}),t.end(JSON.stringify("Route Not Found"));else{const n=e.url.split("/")[3];s(t,e,n)}})).listen(c,a,(()=>{console.log(`Server running at: http://${a}:${c}/`)}))})()})();